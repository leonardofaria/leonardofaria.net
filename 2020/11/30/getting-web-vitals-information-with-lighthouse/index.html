<!doctype html><html prefix="og: http://ogp.me/ns#" lang=en-us><head itemscope itemtype=https://hugo.leonardofaria.net><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:locale" content="en"><meta name=language content="en"><title itemprop=name>Generating Web Vitals information with Lighthouse &#183; Leonardo Faria</title><meta property="og:title" content="Generating Web Vitals information with Lighthouse &#183; Leonardo Faria"><meta name=twitter:title content="Generating Web Vitals information with Lighthouse &#183; Leonardo Faria"><meta itemprop=name content="Generating Web Vitals information with Lighthouse &#183; Leonardo Faria"><meta name=application-name content="Leonardo Faria"><meta property="og:site_name" content="Leonardo Faria"><base href=https://hugo.leonardofaria.net/2020/11/30/getting-web-vitals-information-with-lighthouse/><link rel=canonical href=https://hugo.leonardofaria.net/2020/11/30/getting-web-vitals-information-with-lighthouse/ itemprop=url><meta name=url content="https://hugo.leonardofaria.net/2020/11/30/getting-web-vitals-information-with-lighthouse/"><meta name=twitter:url content="https://hugo.leonardofaria.net/2020/11/30/getting-web-vitals-information-with-lighthouse/"><meta property="og:url" content="https://hugo.leonardofaria.net/2020/11/30/getting-web-vitals-information-with-lighthouse/"><meta itemprop=image content="https://hugo.leonardofaria.net/images/og-images/2228.png"><meta property="og:image" content="https://hugo.leonardofaria.net/images/og-images/2228.png"><meta name=twitter:image content="https://hugo.leonardofaria.net/images/og-images/2228.png"><meta name=twitter:image:src content="https://hugo.leonardofaria.net/images/og-images/2228.png"><meta name=twitter:card content="summary_large_image"><meta property="og:type" content="article"><meta itemprop=description content="Earlier this year, Google announced that “page experience” would impact its search ranking. A few weeks ago, they announced that the new page experience signals will roll out in May 2021. But what are these page experience signals?"><meta property="og:description" content="Earlier this year, Google announced that “page experience” would impact its search ranking. A few weeks ago, they announced that the new page experience signals will roll out in May 2021. But what are these page experience signals?"><meta name=description content="Earlier this year, Google announced that “page experience” would impact its search ranking. A few weeks ago, they announced that the new page experience signals will roll out in May 2021. But what are these page experience signals?"><meta name=twitter:description content="Earlier this year, Google announced that “page experience” would impact its search ranking. A few weeks ago, they announced that the new page experience signals will roll out in May 2021. But what are these page experience signals?"><meta property="article:published_time" content="2020-11-30T03:00:00Z"><meta name=twitter:label1 value="Reading time"><meta name=twitter:data1 value="5 minutes"><meta name=twitter:label2 value=Published><meta name=twitter:data2 value="November 30, 2020"><meta property="article:tag" content="javascript"><meta property="article:tag" content="lighthouse"><meta property="og:updated_time" content="2020-11-30T03:00:00Z"><meta property="og:article:author" content="Leonardo Faria"><meta property="article:author" content="Leonardo Faria"><meta name=author content="Leonardo Faria"><meta name=generator content="Hugo 0.73.0"><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com/ crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel=stylesheet><link rel=stylesheet href=https://hugo.leonardofaria.net/css/styles.min.0f1a07fa6013988f3640ab8076347106f984a80a42c9bd9b2009cfda32a8e9a3.css integrity="sha256-DxoH+mATmI82QKuAdjRxBvmEqApCyb2bIAnP2jKo6aM="><link href=/index.xml rel=alternate type=application/rss+xml title="Leonardo Faria"><script src=https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js></script><link rel=webmention href=https://webmention.io/leonardofaria.net/webmention><link rel=pingback href=https://webmention.io/leonardofaria.net/xmlrpc><script src=https://hugo.leonardofaria.net/js/webmentions.min.27dd59de9067c1013f8dbe5eaba5dc5d1d2172c6f3a3f61cc4d83665fa9b7a63.js type=text/javascript></script></head><body class="bg-gradient flex flex-col min-h-screen"><header id=header class="w-full m-0 fixed z-10 transition-all duration-300 ease-in-out border-t-4 border-gray-300 backdrop-filter-blur"><div id=header-container class="max-w-7xl mx-auto p-6 flex items-center flex-wrap lg:flex-no-wrap relative justify-between"><a href=https://hugo.leonardofaria.net/ class="tracking-tighter leading-10 text-3xl font-semibold text-gray-600 flex flex-shrink-0">Leonardo Faria</a><div class="block lg:hidden mx-2"><button class="nav-button w-10 h-10 justify-center flex items-center opacity-75 hover:opacity-100 transition duration-300 ease-in-out"><svg class="fill-current h-4 w-4" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg></button>
<button class="hidden nav-button w-10 h-10 justify-center flex items-center opacity-75 hover:opacity-100 transition duration-300 ease-in-out"><svg class="fill-current h-4 w-4" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Close menu</title><polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"/></svg></button></div><div class="absolute right-8 top-16 lg:relative lg:right-0 lg:top-0 flex flex-col lg:flex-row items-center rounded-md bg-white shadow lg:bg-transparent lg:shadow-none"><nav id=nav-social-links class="p-4 lg:p-0 text-gray-600 hidden lg:block lg:order-last w-full lg:w-auto lg:ml-3"><ul class="flex justify-end"><li><a class="block p-2 opacity-75 hover:opacity-100 transition duration-300 ease-in-out" title=Twitter href=https://www.twitter.com/leozera rel=me><svg class="fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Twitter</title><path d="M6.29 18.25c7.55.0 11.67-6.25 11.67-11.67v-.53c.8-.59 1.49-1.3 2.04-2.13-.75.33-1.54.55-2.36.65a4.12 4.12.0 001.8-2.27c-.8.48-1.68.81-2.6 1a4.1 4.1.0 00-7 3.74 11.65 11.65.0 01-8.45-4.3 4.1 4.1.0 001.27 5.49C2.01 8.2 1.37 8.03.8 7.7v.05a4.1 4.1.0 003.3 4.03 4.1 4.1.0 01-1.86.07 4.1 4.1.0 003.83 2.85A8.23 8.23.0 010 16.4a11.62 11.62.0 006.29 1.84"/></svg></a></li><li><a class="block p-2 opacity-75 hover:opacity-100 transition duration-300 ease-in-out" title=Github href=https://www.github.com/leonardofaria rel=me><svg class="fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>GitHub</title><path d="M10 0A10 10 0 006.84 19.49c.5.1.68-.22.68-.48l-.01-1.7c-2.78.6-3.37-1.34-3.37-1.34-.46-1.16-1.11-1.47-1.11-1.47-.9-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.9 1.52 2.34 1.08 2.91.83.1-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.94.0-1.1.39-1.99 1.03-2.69a3.6 3.6.0 01.1-2.64s.84-.27 2.75 1.02a9.58 9.58.0 015 0c1.91-1.3 2.75-1.02 2.75-1.02.55 1.37.2 2.4.1 2.64.64.7 1.03 1.6 1.03 2.69.0 3.84-2.34 4.68-4.57 4.93.36.31.68.92.68 1.85l-.01 2.75c0 .26.18.58.69.48A10 10 0 0010 0"/></svg></a></li><li><a class="block p-2 opacity-75 hover:opacity-100 transition duration-300 ease-in-out" title=Linkedin href=https://linkedin.com/in/leonardofariacoelho rel=me><svg class="fill-current w-5 h-5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg></a></li><li><a class="block p-2 opacity-75 hover:opacity-100 transition duration-300 ease-in-out" title=Email href=mailto:leonardofaria@gmail.com><svg class="fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V4e2c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5.0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></svg></a></li><li><a class="block p-2 opacity-75 hover:opacity-100 transition duration-300 ease-in-out" title=Feed href=/feed><svg class="fill-current w-5 h-5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>RSS</title><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg></a></li></ul></nav><nav id=nav-menu class="p-4 lg:p-0 hidden lg:block w-full lg:w-auto text-gray-600"><ul class="w-full flex flex-col lg:flex-row justify-end items-end lg:items-center"><li class="flex my-2 lg:my-2 mx-1 lg:mx-2"><a title=Archives class="uppercase font-bold lg:py-2 lg:px-3 rounded text-sm opacity-75 hover:opacity-100 transition duration-300 ease-in-out" href=/archives>Archives</a></li><li class="flex my-2 lg:my-2 mx-1 lg:mx-2"><a title=Portfolio class="uppercase font-bold lg:py-2 lg:px-3 rounded text-sm opacity-75 hover:opacity-100 transition duration-300 ease-in-out" href=/portfolio>Portfolio</a></li><li class="flex my-2 lg:my-2 mx-1 lg:mx-2"><a title=Talks class="uppercase font-bold lg:py-2 lg:px-3 rounded text-sm opacity-75 hover:opacity-100 transition duration-300 ease-in-out" href=/talks>Talks</a></li></ul></nav></div></div></header><main class="flex-1 mt-12 max-w-3xl mt-32 mx-auto text-gray-700 w-full"><div id=reading-progress-bar role=presentation class="fixed z-10 top-0 left-0 h-1 bg-gray-700"></div><article class=article><header class="text-center pt-10 pb-6"><small class="text-center text-sm"><time class=text-gray-500 datetime=2020-11-30T03:00:00+00:00>November 30, 2020</time>
<a href=https://hugo.leonardofaria.net/tags/javascript/ class="inline-flex items-center px-4 py-1 rounded-full no-underline bg-orange-100 text-orange-800 hover:bg-orange-300 ml-4">javascript</a>
<a href=https://hugo.leonardofaria.net/tags/lighthouse/ class="inline-flex items-center px-4 py-1 rounded-full no-underline bg-orange-100 text-orange-800 hover:bg-orange-300 ml-4">lighthouse</a></small><h1 class="leading-9 text-center"><a href=https://hugo.leonardofaria.net/2020/11/30/getting-web-vitals-information-with-lighthouse/ class="no-underline inline-block text-black relative"><div class=dots aria-hidden=true></div>Generating Web Vitals information with Lighthouse</a></h1></header><div class=article__content><p><a href=https://webmasters.googleblog.com/2020/05/evaluating-page-experience.html>Earlier this year</a>, Google announced that “page experience” would impact its search ranking. A few weeks ago, they announced that the new page experience signals will roll out in May 2021. But what are these page experience signals?</p><p><img src=/wp-content/uploads/2020/11/search-page-experience.jpg alt="Google&rsquo;s Page experience chart"></p><p>The <a href=https://developers.google.com/search/docs/guides/page-experience>page experience</a> signal measures aspects of how users perceive the experience of interacting with a web page. Offering mobile-friendly pages and serving content over HTTPS is something we have been doing for a while but soon slow sites may lose their spot in the Google page ranking algorithm.</p><div class="my-10 p-4 border border-gray-6 rounded-md bg-white"><strong>Hi! This post is part of a Lighthouse post series. Also, check out:</strong><ul><li><a href=/2020/11/30/the-undocumented-lighthouse-guide#quick-lighthouse-intro>Quick Lighthouse intro</a></li><li><a href=/2020/11/30/the-undocumented-lighthouse-guide#the-lighthouse-node-package>The Lighthouse Node package</a></li><li><a href=/2020/11/30/getting-asset-transferred-information-with-lighthouse/>Getting asset transferred information with Lighthouse</a></li><li><a href=/2020/11/30/generating-screenshots-with-lighthouse/>Generating screenshots with Lighthouse</a></li><li><a href=/2020/11/30/creating-har-files-with-lighthouse/>Generating HAR files with Lighthouse</a></li><li><a href=/2020/11/30/my-experience-using-lighthouse-in-the-real-world/>My experience using Lighthouse in the real world</a></li></ul></div><h2 id=what-are-core-web-vitals>What are Core Web Vitals</h2><p><a href=https://web.dev/vitals/#core-web-vitals>From Google</a>:</p><blockquote><p>Core Web Vitals are the subset of Web Vitals that apply to all web pages, should be measured by all site owners, and will be surfaced across all Google tools. <strong>Each of the Core Web Vitals represents a distinct facet of the user experience</strong>, is measurable in the field, and reflects the real-world experience of a critical user-centric outcome.</p></blockquote><p>The three facets are:</p><ul><li><strong>Loading</strong>: <em>how fast is this page?</em> <a href=https://web.dev/cls/>Largest Contentful Paint</a> measures perceived load speed and marks the point on the page load timeline when the page’s main content has likely loaded.</li><li><strong>Interactivity</strong>: <em>how fast does the page react to user input?</em> <a href=https://web.dev/fid/>First Input Delay</a> measures responsiveness and quantifies the experience users feel when trying to first interact with the page.</li><li><strong>Visual stability</strong>: <em>does the page layout change while the page is loading?</em> <a href=https://web.dev/cls/>Cumulative Layout Shift</a> measures visual stability and quantifies the amount of unexpected layout shift of visible page content.</li></ul><p><img src=/wp-content/uploads/2020/11/core-web-vitals.png alt="Core Web Vitals"></p><p>All of Google&rsquo;s popular tools for developers support measurement of Core Web Vitals, including <a href=https://github.com/GoogleChrome/lighthouse>Lighthouse</a>, <a href=https://developers.google.com/speed/pagespeed/insights/>PageSpeed Insights</a>, <a href=https://developers.google.com/web/tools/chrome-devtools>Chrome DevTools</a>, <a href=https://search.google.com/search-console/about>Search Console</a>, <a href=/measure/>web.dev&rsquo;s measure tool</a>, the <a href=https://chrome.google.com/webstore/detail/web-vitals/ahfhijdlegdabablpippeagghigmibma>Web Vitals Chrome extension</a> and the new <a href=https://developers.google.com/web/tools/chrome-user-experience-report>Chrome UX Report</a> API.</p><p>It is important to mention that FID can&rsquo;t be measured in Lighthouse and as an alternative, Google recommends measuring the <a href=https://web.dev/tbt/>Total Blocking Time (TBT)</a>. Tools like Lighthouse that load pages in a simulated environment without a user can not measure FID, since a simulated environment has no user input.</p><h2 id=using-lighthouse-for-core-web-vitals-measurements>Using Lighthouse for Core Web Vitals measurements</h2><p>The Web Vitals information is very easily found in the Lighthouse reports:</p><p><img src=/wp-content/uploads/2020/11/lighthouse-web-vitals-report.jpg alt="Web Vitals information in Lighthouse report"></p><p>What I want to share today is how to get Web Vitals information from the Lighthouse node package (from my <a href=https://github.com/leonardofaria/lighthouse-examples>lighthouse-examples GitHub repository</a>):</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#000;font-weight:700>const</span> lighthouse <span style=color:#000;font-weight:700>=</span> require(<span style=color:#d14>&#39;lighthouse&#39;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#000;font-weight:700>const</span> chromeLauncher <span style=color:#000;font-weight:700>=</span> require(<span style=color:#d14>&#39;chrome-launcher&#39;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>(async () =&gt; {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>  <span style=color:#000;font-weight:700>const</span> chrome <span style=color:#000;font-weight:700>=</span> await chromeLauncher.launch({chromeFlags<span style=color:#000;font-weight:700>:</span> [<span style=color:#d14>&#39;--headless&#39;</span>]});
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>  <span style=color:#000;font-weight:700>const</span> options <span style=color:#000;font-weight:700>=</span> {port<span style=color:#000;font-weight:700>:</span> chrome.port, emulatedFormFactor<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#39;desktop&#39;</span>};
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>  <span style=color:#000;font-weight:700>const</span> { lhr<span style=color:#000;font-weight:700>:</span> { audits } } <span style=color:#000;font-weight:700>=</span> await lighthouse(<span style=color:#d14>&#39;https://leonardofaria.net&#39;</span>, options);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>  <span style=color:#000;font-weight:700>const</span> webVitals <span style=color:#000;font-weight:700>=</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    largestContentfulPaint<span style=color:#000;font-weight:700>:</span> audits[<span style=color:#d14>&#39;largest-contentful-paint&#39;</span>].numericValue,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    cumulativeLayoutShift<span style=color:#000;font-weight:700>:</span> audits[<span style=color:#d14>&#39;cumulative-layout-shift&#39;</span>].numericValue,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>    totalBlockingTime<span style=color:#000;font-weight:700>:</span> audits[<span style=color:#d14>&#39;total-blocking-time&#39;</span>].numericValue,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>    largestContentfulPaintElement<span style=color:#000;font-weight:700>:</span> audits[<span style=color:#d14>&#39;largest-contentful-paint-element&#39;</span>].details.items[<span style=color:#099>0</span>].node.snippet,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    layoutShiftElements<span style=color:#000;font-weight:700>:</span> audits[<span style=color:#d14>&#39;layout-shift-elements&#39;</span>].details.items.map(({ node }) =&gt; node.snippet).toString(),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>  };
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>  console.log(webVitals);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>  await chrome.kill();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>})();
</code></pre></div><p>The information highlighted in the image above can be found in lines 9 - 14. The output of the script:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>{
  largestContentfulPaint<span style=color:#000;font-weight:700>:</span> <span style=color:#099>3429.8639999999996</span>,
  cumulativeLayoutShift<span style=color:#000;font-weight:700>:</span> <span style=color:#099>0.0002832719606426758</span>,
  totalBlockingTime<span style=color:#000;font-weight:700>:</span> <span style=color:#099>0</span>,
  largestContentfulPaintElement<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#39;&lt;header id=&#34;header&#34; class=&#34;header flex w-full m-0 bg-cover bg-top-center&#34; style=&#34;background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.55))…&#34;&gt;&#39;</span>,
  layoutShiftElements<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#39;&lt;div id=&#34;nav-menu&#34; class=&#34;absolute lg:p-6 hidden lg:block self-end text-white rounded-md bg-black sh…&#34;&gt;,&lt;a href=&#34;https://leonardofaria.net/&#34; class=&#34;tracking-tighter text-4xl font-semibold flex flex-shrink-0 text-center px-…&#34;&gt;&#39;</span>
}
</code></pre></div><p>For LCP, CLS and TBT, the output is not including a numeric unit, only the value. The goal here is to get a numeric value so we can manipulate data; for example, sorting or finding minimum / maximum values. If data manipulation is not the main goal, using the displayValue property instead of numericValue may work better. Example:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>{
  largestContentfulPaint<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#39;2.4 s&#39;</span>,
  cumulativeLayoutShift<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#39;0&#39;</span>,
  totalBlockingTime<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#39;30 ms&#39;</span>,
}
</code></pre></div><p>The two last properties of the webVitals object return strings containing HTML node. The intention of reporting these elements is to facilitate the identification of the villains of the page being tested.</p><p>Bad Largest Contentful Paint metric can be caused for one or more of the following:</p><ul><li>Slow server response times;</li><li>Render-blocking JavaScript and CSS;</li><li>Slow resource load times;</li><li>Client-side rendering.</li></ul><p>In the example, the largest contentful paint element is a header with a hero image. This element contains an external background image and the image is the culprit causing the slow rendering? time.</p><p>Bad Cumulative Layout Shift metrics can be caused for one or more of the following:</p><ul><li>Images without dimensions;</li><li>Ads, embeds, iframes without dimensions;</li><li>Dynamically injected content;</li><li>Web fonts causing FOIT/Fout.</li></ul><p>The page used in the example uses Google Fonts and there is a tiny layout shift when the font is loaded. The shift may be noticeable by users and it is reported in the layout shift elements property.</p><h2 id=why-do-we-need-this>Why do we need this?</h2><p>This script is useful in order to closely follow what is changing in the web vitals metrics of a page. In my case, I store the LCP, TBT and CLS numeric values in a database and use this information in a Gauge dashboard. I am not tracking the largest contentful paint element or layout shift elements yet.</p><p>Can you think of different use cases? Let me know in the comments!</p></div><section class="my-5 pt-10 pb-5 border-t border-gray-400 flex items-center"><img alt="Avatar photo" class="border border-gray-400 p-1 w-10 h-10 rounded-full mr-3" src=/images/avatar.jpg>
<span class=flex-grow>If you like my content, follow me on <a class="transition duration-300 ease-in-out hover:text-blue-600" href=https://twitter.com/leozera>Twitter</a> and <a class="transition duration-300 ease-in-out hover:text-blue-600" href=https://github.com/leonardofaria>GitHub</a></span>
<a href="http://twitter.com/share?url=https%3a%2f%2fhugo.leonardofaria.net%2f2020%2f11%2f30%2fgetting-web-vitals-information-with-lighthouse%2f&text=Generating%20Web%20Vitals%20information%20with%20Lighthouse&via=leozera" class="text-white text-xs font-bold rounded-md no-underline flex items-center px-3 py-2 bg-twitter hover:color-white hover:opacity-75 no-underline"><svg class="fill-current w-4 h-4 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Twitter</title><path d="M6.29 18.25c7.55.0 11.67-6.25 11.67-11.67v-.53c.8-.59 1.49-1.3 2.04-2.13-.75.33-1.54.55-2.36.65a4.12 4.12.0 001.8-2.27c-.8.48-1.68.81-2.6 1a4.1 4.1.0 00-7 3.74 11.65 11.65.0 01-8.45-4.3 4.1 4.1.0 001.27 5.49C2.01 8.2 1.37 8.03.8 7.7v.05a4.1 4.1.0 003.3 4.03 4.1 4.1.0 01-1.86.07 4.1 4.1.0 003.83 2.85A8.23 8.23.0 010 16.4a11.62 11.62.0 006.29 1.84"/></svg>Tweet</a></section><section class="my-5 py-5 relative"><h2>Interactions</h2><h3>Webmentions</h3><div id=summary class="flex items-center"><button id=button-likes-75f436eb463e521b507628664aed8f98 class="flex items-center mr-6 p-3 bg-gray-100 hover:bg-white transition duration-300 ease-in-out rounded-md"><svg class="w-6 h-6 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656.0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/></svg>
<span id=webmentions-total-likes class=mr-1></span></button>
<button id=button-interactions-75f436eb463e521b507628664aed8f98 class="flex items-center mr-6 p-3 bg-gray-100 hover:bg-white transition duration-300 ease-in-out rounded-md"><svg class="w-6 h-6 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M18 13V5a2 2 0 00-2-2H4A2 2 0 002 5v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6A1 1 0 015 7zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z" clip-rule="evenodd"/></svg>
<span id=webmentions-total-interactions class=mr-1></span></button><div class=flex-grow><div id=webmentions-avatars class="flex -space-x-2 overflow-hidden"></div></div></div><template id=reply-template class=list-none><li class="flex mb-8 text-base"><a class="js-author flex-shrink-0" href><img class="js-avatar w-8 h-8 rounded-full mr-3" alt src></a><div><div><strong><a class="js-author-name no-underline" href></a></strong><small><a class="js-date js-source no-underline ml-2" href></a></small></div><div class=js-content></div></div></li></template><template id=like-template class=list-none><li class="flex mb-8 text-base"><a class="js-author flex-shrink-0" href><img class="js-avatar w-8 h-8 rounded-full mr-3" alt src></a>
<a class="js-source no-underline" href><span class="js-sentence js-author-name" href></span><small class="js-date ml-2" href></small></a></li></template><div id=webmentions-interactions-75f436eb463e521b507628664aed8f98 class=hidden><h4>Replies & Shares</h4><ul id=replies></ul><ul id=shares></ul></div><div id=webmentions-likes-75f436eb463e521b507628664aed8f98 class=hidden><h4>Likes</h4><ul id=likes></ul></div><script type=text/javascript>var webmentions=(permalink,aliases,productionBaseUrl)=>{fetchWebmentions(permalink,aliases,productionBaseUrl);document.querySelector('#button-interactions-75f436eb463e521b507628664aed8f98').addEventListener('click',()=>{document.querySelector('#webmentions-interactions-75f436eb463e521b507628664aed8f98').classList.toggle('hidden');});document.querySelector('#button-likes-75f436eb463e521b507628664aed8f98').addEventListener('click',()=>{document.querySelector('#webmentions-likes-75f436eb463e521b507628664aed8f98').classList.toggle('hidden');});};document.addEventListener('turbolinks:load',webmentions("https://hugo.leonardofaria.net/2020/11/30/getting-web-vitals-information-with-lighthouse/",null,"https://leonardofaria.net"));</script><h3>Comments</h3><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"leonardofaria"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></article><aside class=flex><a class="w-full md:w-1/2 flex flex-col items-center py-7 px-3 no-underline rounded-md hover:bg-white transition duration-300 ease-in-out" href=/2020/11/30/creating-har-files-with-lighthouse/><span class="border border-gray-6 text-xs rounded-md mb-2 uppercase font-bold py-2 px-3">Read this next</span>
<span class=text-center>Creating HAR files with Lighthouse</span></a>
<a class="w-full md:w-1/2 flex flex-col items-center py-7 px-3 no-underline rounded-md hover:bg-white transition duration-300 ease-in-out" href=/2020/11/30/generating-screenshots-with-lighthouse/><span class="border border-gray-6 text-xs rounded-md mb-2 uppercase font-bold py-2 px-3">You might enjoy</span>
<span class=text-center>Generating screenshots with Lighthouse</span></a></aside></main><footer class="w-full max-w-7xl mx-auto text-center border-t border-gray-200 py-9 px-3 mt-9 pin-b text-sm text-gray-500">Made with <a href=https://gohugo.io class="underline transition duration-300 ease-in-out hover:text-blue-600">Hugo</a> and <a href=https://github.com/leonardofaria/bento class="underline transition duration-300 ease-in-out hover:text-blue-600">Bento theme</a>.</footer><script>var initMenu=()=>{var navButtons=document.querySelectorAll('.nav-button');var navMenu=document.querySelector('#nav-menu');var navSocialLinks=document.querySelector('#nav-social-links');for(var button of navButtons){button.addEventListener('click',()=>{console.log('click')
navMenu.classList.toggle("hidden");if(navSocialLinks){navSocialLinks.classList.toggle("hidden");}
for(var navButton of navButtons){navButton.classList.toggle("hidden");};});}}
document.addEventListener('turbolinks:load',initMenu());</script><script>var initHeader=()=>{let scrollPos=window.scrollY;var header=document.querySelector('#header');var headerContainer=document.querySelector("#header-container");var readingProgressBar=document.querySelector("#reading-progress-bar");let scrollTop=0;let scrollBottom=0;let scrollPercent=0;var addClassOnScroll=()=>{header.classList.add("shadow");header.classList.add("bg-white-90");}
var removeClassOnScroll=()=>{header.classList.remove("shadow");header.classList.remove("bg-white-90");}
window.onscroll=function(){scrollPos=window.scrollY;scrollTop=document.documentElement["scrollTop"]||document.body["scrollTop"];scrollBottom=(document.documentElement["scrollHeight"]||document.body["scrollHeight"])-document.documentElement.clientHeight;scrollPercent=scrollTop/scrollBottom*100;readingProgressBar.style.width=(scrollTop/scrollBottom*100)+'%';if(scrollPos>0){addClassOnScroll()}
else{removeClassOnScroll()}}}
document.addEventListener('turbolinks:load',initHeader());</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-157386-6','auto');ga('send','pageview');}</script><script async defer data-website-id=ef25ee64-202b-4378-822f-22398533a59c src=https://umami.leonardofaria.net/umami.js></script></body></html>