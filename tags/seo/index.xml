<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>seo on Leonardo Faria</title><link>https://leonardofaria.net/tags/seo/</link><description>Recent content in seo on Leonardo Faria</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 07 Jun 2009 14:30:52 -0300</lastBuildDate><atom:link href="https://leonardofaria.net/tags/seo/index.xml" rel="self" type="application/rss+xml"/><item><title>sitemap.xml no Rails</title><link>https://leonardofaria.net/2009/06/07/sitemapxml-no-rails/</link><pubDate>Sun, 07 Jun 2009 14:30:52 -0300</pubDate><guid>https://leonardofaria.net/2009/06/07/sitemapxml-no-rails/</guid><description>&lt;p>Usado para SEO, &lt;a href="http://www.sitemaps.org/">Sitemaps&lt;/a> servem para informar aos sites de busca como indexar as páginas de um site. Indexadores descobrem páginas com base em links no site e outros sites e o que os Sitemaps fazem é complementar esses dados, para permitir que os indexadores com suporte para Sitemaps peguem todos os URLs no Sitemap e aprendam sobre esses URLs usando os metadados associados.&lt;/p>
&lt;p>Existem &lt;a href="http://www.xml-sitemaps.com/">sites&lt;/a> para gerar o arquivo, mas fazer isso no Rails não é complicado e faremos isso em 4 passos. A dica vem do &lt;a href="http://tonycode.com/wiki/index.php?title=Ruby_on_Rails_Sitemap_Generator">Tony&lt;/a> no livro &lt;a href="http://www.pragprog.com/titles/fr_arr/advanced-rails-recipes">Advanced Rails Recipes&lt;/a>.&lt;/p>
&lt;h3 id="1-controller">1. Controller&lt;/h3>
&lt;p>Crie um controller chamado sitemap:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">script/generate controller sitemap
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="2-busca-das-urls">2. Busca das URLs&lt;/h3>
&lt;p>Crie o método para listar todas as entradas do seu banco:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-ruby" data-lang="ruby">&lt;span style="color:#000;font-weight:bold">class&lt;/span> &lt;span style="color:#458;font-weight:bold">SitemapController&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span> &lt;span style="color:#008080">ApplicationController&lt;/span>
&lt;span style="color:#000;font-weight:bold">def&lt;/span> &lt;span style="color:#900;font-weight:bold">sitemap&lt;/span>
&lt;span style="color:#008080">@entries&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#008080">Model&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>find(&lt;span style="color:#990073">:all&lt;/span>, &lt;span style="color:#990073">:order&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#d14">&amp;#34;updated_at DESC&amp;#34;&lt;/span>, &lt;span style="color:#990073">:limit&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#099">50000&lt;/span>)
headers&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#d14">&amp;#34;Content-Type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#d14">&amp;#34;text/xml&amp;#34;&lt;/span>
&lt;span style="color:#998;font-style:italic"># set last modified header to the date of the latest entry.&lt;/span>
headers&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#d14">&amp;#34;Last-Modified&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#008080">@entries&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#099">0&lt;/span>&lt;span style="color:#000;font-weight:bold">].&lt;/span>updated_at&lt;span style="color:#000;font-weight:bold">.&lt;/span>httpdate
&lt;span style="color:#000;font-weight:bold">end&lt;/span>
&lt;span style="color:#000;font-weight:bold">end&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>As entradas do arquivo sitemap.xml são limitadas em seu &lt;a href="http://www.sitemaps.org/pt_BR/protocol.php">protocolo&lt;/a> em 50000 registros. Você pode se quiser, gerar esse arquivo com as URLs de várias entidades, como o &lt;a href="http://www.igvita.com/">Ilya Grigorik&lt;/a> faz em &lt;a href="http://www.igvita.com/2006/11/24/google-yahoo-sitemaps-in-rails/">seu artigo&lt;/a>.&lt;/p>
&lt;h3 id="3-view">3. View&lt;/h3>
&lt;p>Crie o arquivo sitemap.rxml&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-ruby" data-lang="ruby">xml&lt;span style="color:#000;font-weight:bold">.&lt;/span>instruct!
xml&lt;span style="color:#000;font-weight:bold">.&lt;/span>urlset &lt;span style="color:#d14">&amp;#34;xmlns&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#d14">&amp;#34;http://www.sitemaps.org/schemas/sitemap/0.9&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">do&lt;/span>
&lt;span style="color:#008080">@entries&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>each &lt;span style="color:#000;font-weight:bold">do&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>entry&lt;span style="color:#000;font-weight:bold">|&lt;/span>
xml&lt;span style="color:#000;font-weight:bold">.&lt;/span>url &lt;span style="color:#000;font-weight:bold">do&lt;/span>
xml&lt;span style="color:#000;font-weight:bold">.&lt;/span>loc url_for(&lt;span style="color:#990073">:controller&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#d14">&amp;#39;controller&amp;#39;&lt;/span>, &lt;span style="color:#990073">:action&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#d14">&amp;#39;show&amp;#39;&lt;/span>, &lt;span style="color:#990073">:id&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> entry&lt;span style="color:#000;font-weight:bold">.&lt;/span>id, &lt;span style="color:#990073">:only_path&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000;font-weight:bold">false&lt;/span>)
xml&lt;span style="color:#000;font-weight:bold">.&lt;/span>lastmod entry&lt;span style="color:#000;font-weight:bold">.&lt;/span>updated_at&lt;span style="color:#000;font-weight:bold">.&lt;/span>to_date
&lt;span style="color:#000;font-weight:bold">end&lt;/span>
&lt;span style="color:#000;font-weight:bold">end&lt;/span>
&lt;span style="color:#000;font-weight:bold">end&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="4-atualização-do-arquivo-de-rotas">4. Atualização do arquivo de rotas&lt;/h3>
&lt;p>Crie a rota para que você tenha o arquivo &lt;a href="http://www.seusite.com.br/sitemap.xml">www.seusite.com.br/sitemap.xml&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-ruby" data-lang="ruby">map&lt;span style="color:#000;font-weight:bold">.&lt;/span>connect &lt;span style="color:#d14">&amp;#39;sitemap.xml&amp;#39;&lt;/span>, &lt;span style="color:#990073">:controller&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#d14">&amp;#34;sitemap&amp;#34;&lt;/span>, &lt;span style="color:#990073">:action&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#d14">&amp;#34;sitemap&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="conclusão">Conclusão&lt;/h3>
&lt;p>Com o arquivo pronto, é só indicá-lo no &lt;a href="http://www.google.com/webmasters/sitemaps/">Google Webmaster&lt;/a> e no &lt;a href="http://siteexplorer.search.yahoo.com/">Yahoo Site Explorer&lt;/a>. Caso queira conhecer mais sobre sitemaps, visite &lt;a href="http://www.google.com/support/webmasters/bin/answer.py?answer=40318&amp;amp;hl=pt_BR">essa página&lt;/a> do Google.&lt;/p></description></item></channel></rss>